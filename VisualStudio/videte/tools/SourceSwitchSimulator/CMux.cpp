// CMux.cpp: implementation of the CMux class.
//
//////////////////////////////////////////////////////////////////////

#include "stdafx.h"
#include "Simulator.h"
#include "CSignal.h"
#include "CMux.h"

#ifdef _DEBUG
#undef THIS_FILE
static char THIS_FILE[]=__FILE__;
#define new DEBUG_NEW
#endif

//////////////////////////////////////////////////////////////////////
// Construction/Destruction
//////////////////////////////////////////////////////////////////////

CMux::CMux()
{
	Init(2);
}

//////////////////////////////////////////////////////////////////////
CMux::Init(int nOutPorts)
{
	m_nOutPorts = nOutPorts;
	m_OSignal.SetSize(nOutPorts);
	for (int nI = 0; nI < nOutPorts; nI++)
		m_OSignal.SetAt(nI, NULL);
}

//////////////////////////////////////////////////////////////////////
CMux::~CMux()
{
	m_OSignal.RemoveAll();
}

//////////////////////////////////////////////////////////////////////
CSignal& CMux::Out(int nOutPort)
{
	return *m_OSignal.GetAt(nOutPort);
}

//////////////////////////////////////////////////////////////////////
void CMux::SwitchSignalToOutput(CSignal& Signal, int nOutPort)
{
	m_OSignal.SetAt(nOutPort, &Signal);
}
