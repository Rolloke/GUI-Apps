/////////////////////////////////////////////////////////////////////////////
// PROJECT:		AkuUnit
// FILE:		$Workfile: CAlarm.cpp $
// ARCHIVE:		$Archive: /Project/Units/Aku/AkuUnit/CAlarm.cpp $
// CHECKIN:		$Date: 27.02.04 9:53 $
// VERSION:		$Revision: 4 $
// LAST CHANGE:	$Modtime: 27.02.04 9:02 $
// BY AUTHOR:	$Author: Georg.feddern $
// $Nokeywords:$
//////////////////////////////////////////////////////////////////////

#include "stdafx.h"
#include "conio.h"
#include "AkuReg.h"
#include "CAku.h"
#include "CIo.h"
#include "CAlarm.h"

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// CAlarm::CAlarm
CAlarm::CAlarm(WORD wIOBase, WORD wExtCard)
{
	m_wIOBase 	= wIOBase;
	m_wExtCard  = wExtCard;
	m_byAck     = 0;
	m_byEdge    = 0;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// CAlarm::~CAlarm
CAlarm::~CAlarm()
{
	 WK_TRACE( _T("CAlarm::~CAlarm()\n"));
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// CAlarm::CAlarm
BOOL CAlarm::IsValid()
{
	return (m_wIOBase != 0);
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// CAlarm::GetCurrentState
BYTE CAlarm::GetCurrentState()
{
	return IoAccess.Input(m_wIOBase + ALARM_CUR_STATUS_OFFSET); 
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// CAlarm::GetState
BYTE CAlarm::GetState()
{
	return IoAccess.Input(m_wIOBase + ALARM_STATUS_OFFSET);
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// CAlarm::SetEdge
void CAlarm::SetEdge(BYTE byEdge)
{
    IoAccess.Output(m_wIOBase + ALARM_EDGE_SEL_OFFSET, byEdge);
	m_byEdge = byEdge;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// CAlarm::SetAck
void CAlarm::SetAck(BYTE byAck)
{
    IoAccess.Output(m_wIOBase + ALARM_ACK_OFFSET, byAck);
	m_byAck = byAck;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// CAlarm::GetAck
BYTE CAlarm::GetAck()
{
	return m_byAck;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// CAlarm::GetEdge
BYTE CAlarm::GetEdge()
{
	return m_byEdge;
}
